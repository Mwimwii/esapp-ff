<div>
  <div class="row">
    <div class="col-lg-12">
      <div class="card card-top card-top-primary">
        <div class="card-header">
          <vb-headers-heading-2
            [data]="{'title':'Faabs','description':'Welcome to the faabs module.'}"
          ></vb-headers-heading-2>
        </div>
        <div class="card-body">

          <div>

            <nz-tabset nzType="top" nzTabPosition="left" nzSize="large">

              <nz-tab *ngFor="let faab of faabs; let i = index;" class="mx-2" [nzTitle]="'#'+ i + ' ' + faab.name">
                <div class='row ml-4'>
                  <div style="margin-bottom: 8px;" class='mx-1 mb-4'>
                    <button nz-button (click)='showAttendanceModal(faab)'><i class=" fe fe-plus-circle mr-1 align-middle"></i></button>
                  </div>
                </div>
                <div class='row ml-4'>
                  <div class="col-12 mb-4">
                    <h6 class="underline font-bold mb-3 text-left">Topics</h6>
                    <nz-table #basicTable [nzData]="faab.topics">
                      <thead>
                        <tr>
                          <th>Output Level Indicator</th>
                          <th>Category</th>
                          <th>Sub Component</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let topic of faab.topics">
                          <td>{{ topic.outputLevelIndicator }}</td>
                          <td>{{ topic.category }}</td>
                          <td>{{ topic.subComponent }}</td>
                        </tr>
                      </tbody>
                    </nz-table>
                  </div>
                </div>

                  <div class="row ml-4">
                    <div class="col-12 mb-4">
                    <h6 class="underline font-bold mb-3 text-left">Attendance</h6>
                    <nz-table #basicTable [nzData]="faab.attendance">
                      <thead>
                        <tr>
                          <th>Date</th>
                          <th>Topic</th>
                          <th>Facilitators</th>
                          <th>Partner Organisations</th>
                          <th>Duration</th>
                          <th>Quarter</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let attendance of faab.attendance">
                          <td>{{ attendance?.trainingDate }}</td>
                          <td>{{ attendance?.topic?.subcomponent }}</td>
                          <td>{{ attendance?.facilitators }}</td>
                          <td>{{ attendance?.partnerOrganisations }}</td>
                          <td>{{ attendance?.duration }} days</td>
                          <td>{{ attendance?.quarter }}</td>
                        </tr>
                      </tbody>
                    </nz-table>
                  </div>
                </div>



              </nz-tab>

              <nz-tab class="mx-2" [nzTitle]="' + Add Faabs Group '">
                <!-- Faabs form  -->
                    <app-faabs-registration></app-faabs-registration>
                <!-- Faabs form  -->
              </nz-tab>

            </nz-tabset>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Topics Modal  -->
  <div name='topics-modal'>
    <nz-modal [(nzVisible)]="isTopicsVisible" nzTitle="Topics Enrolled" (nzOnCancel)="handleCancel()"
      (nzOnOk)="handleTopicsOk()">
      <ng-container *nzModalContent>
        <ul *ngFor="let topic of faab.topics">
          <li>
            <p>{{topic | json}}</p>
          </li>
        </ul>
      </ng-container>
    </nz-modal>
  </div>

<!-- Attenadance form which is the mother of all forms-->
  <div name='attendance-modal'>
    <nz-modal [(nzVisible)]="isAttendanceVisible" nzTitle="Attendance Sheet" (nzOnCancel)="handleCancel()"
      (nzOnOk)="handleAttendanceOk()">
      <ng-container *nzModalContent>
        <app-register-attendants-form [faabs]='selectedFaabs'></app-register-attendants-form>
      </ng-container>
    </nz-modal>
  </div>

  <div name='past-attendance-modal'>
    <nz-modal [(nzVisible)]="isPastAttendanceVisible" nzTitle="Past Attendance" (nzOnCancel)="handleCancel()"
      (nzOnOk)="handlePastAttendanceOk()">
      <ng-container *nzModalContent>
        <ul *ngFor='let faabsAttendance of faabsAttendanceRegisterFiltered'>
          <li>{{faabsAttendance.id}}</li>
        </ul>
        <!--                      <app-register-attendants-form [faabsGroupsId]='faabsIDSelected'></app-register-attendants-form>-->
      </ng-container>
    </nz-modal>
  </div>

</div>
