{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./menu-top.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./menu-top.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport * as _ from 'lodash';\nimport { select, Store } from '@ngrx/store';\nimport { MenuService } from 'src/app/services/menu';\nimport * as Reducers from 'src/app/store/reducers';\n\nvar MenuClassicTopComponent = /*#__PURE__*/function () {\n  function MenuClassicTopComponent(menuService, store, router) {\n    var _this = this;\n\n    _classCallCheck(this, MenuClassicTopComponent);\n\n    this.menuService = menuService;\n    this.store = store;\n    this.router = router;\n    this.store.pipe(select(Reducers.getUser)).subscribe(function (state) {\n      _this.role = state.role;\n    });\n    this.menuService.getMenuData().subscribe(function (menuData) {\n      return _this.menuData = menuData;\n    });\n    this.store.pipe(select(Reducers.getSettings)).subscribe(function (state) {\n      _this.logo = state.logo;\n      _this.menuColor = state.menuColor;\n    });\n  }\n\n  _createClass(MenuClassicTopComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this2 = this;\n\n      this.activateMenu(this.router.url);\n      this.router.events.pipe(filter(function (event) {\n        return event instanceof NavigationStart;\n      })).subscribe(function (event) {\n        _this2.activateMenu(event.url ? event.url : null);\n      });\n    }\n  }, {\n    key: \"activateMenu\",\n    value: function activateMenu(url) {\n      var menuData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.menuData;\n      menuData = JSON.parse(JSON.stringify(menuData));\n      var pathWithSelection = this.getPath({\n        url: url\n      }, menuData, function (entry) {\n        return entry;\n      }, 'url');\n\n      if (pathWithSelection) {\n        pathWithSelection.pop().selected = true;\n\n        _.each(pathWithSelection, function (parent) {\n          return parent.open = true;\n        });\n      }\n\n      this.menuDataActivated = menuData.slice();\n    }\n  }, {\n    key: \"getPath\",\n    value: function getPath(element, source, property) {\n      var _this3 = this;\n\n      var keyProperty = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'key';\n      var childrenProperty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'children';\n      var path = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n      var found = false;\n\n      var getElementChildren = function getElementChildren(value) {\n        return _.get(value, childrenProperty);\n      };\n\n      var getElementKey = function getElementKey(value) {\n        return _.get(value, keyProperty);\n      };\n\n      var key = getElementKey(element);\n      return _.some(source, function (e) {\n        if (getElementKey(e) === key) {\n          path.push(e);\n          return true;\n        } else {\n          return found = _this3.getPath(element, getElementChildren(e), property, keyProperty, childrenProperty, path.concat(e));\n        }\n      }) && (found || _.map(path, property));\n    }\n  }]);\n\n  return MenuClassicTopComponent;\n}();\n\nMenuClassicTopComponent.ctorParameters = function () {\n  return [{\n    type: MenuService\n  }, {\n    type: Store\n  }, {\n    type: Router\n  }];\n};\n\nMenuClassicTopComponent = __decorate([Component({\n  selector: 'vb-menu-classic-top',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n}), __metadata(\"design:paramtypes\", [MenuService, Store, Router])], MenuClassicTopComponent);\nexport { MenuClassicTopComponent };","map":null,"metadata":{},"sourceType":"module"}