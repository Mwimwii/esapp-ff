{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./prices-form.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./prices-form.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { EsappRequestHandlerService } from '../../../../esapp-request-handler.service';\nimport { NzNotificationService } from 'ng-zorro-antd/notification';\n\nvar PricesFormComponent = /*#__PURE__*/function () {\n  function PricesFormComponent(http, notification) {\n    _classCallCheck(this, PricesFormComponent);\n\n    this.http = http;\n    this.notification = notification;\n    this.form = new FormGroup({});\n    this.model = {};\n    this.options = {};\n    this.loading = false;\n    this.formFields = [// Group 1\n    {\n      key: 'market_id',\n      type: 'select',\n      templateOptions: {\n        type: 'text',\n        label: 'Market',\n        placeholder: 'Select Market',\n        required: true,\n        options: []\n      }\n    }, {\n      key: 'commodity_type_id',\n      type: 'select',\n      templateOptions: {\n        type: 'text',\n        label: 'Commodity Type',\n        placeholder: 'Select Commodity Type',\n        required: true,\n        options: [{\n          value: 1,\n          label: 'Grain'\n        }, {\n          value: 2,\n          label: 'Oats'\n        }, {\n          value: 3,\n          label: 'Livestock'\n        }, {\n          value: 4,\n          label: 'Poultry'\n        }]\n      }\n    }, // Group 2\n    {\n      key: 'price_level_id',\n      type: 'select',\n      templateOptions: {\n        type: 'text',\n        label: 'Price Level',\n        placeholder: 'Select Price Level',\n        required: true,\n        options: [{\n          value: 1,\n          label: 'Low'\n        }, {\n          value: 2,\n          label: 'Mid'\n        }, {\n          value: 3,\n          label: 'High'\n        }]\n      }\n    }, // Group 3\n    {\n      key: 'unit_of_measure',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        label: 'Unit',\n        placeholder: '100g,1kg',\n        required: true\n      }\n    }, {\n      key: 'price',\n      type: 'input',\n      templateOptions: {\n        type: 'text',\n        label: 'Price(ZMW)',\n        placeholder: 'ZMW',\n        required: true\n      }\n    }];\n    this.fields = [];\n  }\n\n  _createClass(PricesFormComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      this.http.getDataAuthenticated('/commodity-price-levels').subscribe(function (data) {\n        return _this.formFields[2].templateOptions.options = data;\n      });\n      this.http.getDataAuthenticated('/markets').subscribe(function (data) {\n        return _this.formFields[0].templateOptions.options = data;\n      });\n      this.http.getDataAuthenticated('/commodity-type').subscribe(function (data) {\n        return _this.formFields[1].templateOptions.options = data;\n      }); // Generate the form\n\n      this.fields = [{\n        fieldGroupClassName: 'row',\n        fieldGroup: [Object.assign({\n          className: 'col-6'\n        }, this.formFields[0]), Object.assign({\n          className: 'col-6'\n        }, this.formFields[1])]\n      }, {\n        className: 'section-label',\n        template: '<hr /><div><strong>Price and Price Level(Example Section):</strong></div>'\n      }, {\n        fieldGroupClassName: 'row',\n        fieldGroup: [Object.assign({\n          className: 'col-6'\n        }, this.formFields[2]), Object.assign({\n          className: 'col-3'\n        }, this.formFields[3]), Object.assign({\n          className: 'col-3'\n        }, this.formFields[4])]\n      }, {\n        fieldGroupClassName: 'row',\n        fieldGroup: [Object.assign({\n          className: 'col-6'\n        }, this.formFields[5]), Object.assign({\n          className: 'col-3'\n        }, this.formFields[6]), Object.assign({\n          className: 'col-3'\n        }, this.formFields[7])]\n      }, {\n        template: '<hr />'\n      }, {\n        type: 'checkbox',\n        key: 'otherToo',\n        templateOptions: {\n          label: 'I agree to that this information is accurate and verifiable'\n        }\n      }];\n    }\n  }, {\n    key: \"submit\",\n    value: function submit(model) {\n      var _this2 = this;\n\n      this.loading = true;\n      this.model.year = '2021';\n      this.model.month = '12';\n      this.model.district = '1';\n      this.http.postDataAuthenticated('/prices', this.model).subscribe(function (data) {\n        _this2.loading = false;\n      });\n      this.notification.success('Commodity Added', 'Commodity Price added');\n    }\n  }]);\n\n  return PricesFormComponent;\n}();\n\nPricesFormComponent.ctorParameters = function () {\n  return [{\n    type: EsappRequestHandlerService\n  }, {\n    type: NzNotificationService\n  }];\n};\n\nPricesFormComponent = __decorate([Component({\n  selector: 'app-prices-form',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n}), __metadata(\"design:paramtypes\", [EsappRequestHandlerService, NzNotificationService])], PricesFormComponent);\nexport { PricesFormComponent };","map":null,"metadata":{},"sourceType":"module"}