{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\admin\\\\Documents\\\\work\\\\ESAPP\\\\esapp-mobile\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { __awaiter, __decorate, __metadata } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./faabs.component.html?ngResource\";\nimport { Component } from '@angular/core';\nimport { DataService } from '../../services/data-service';\nimport { Store } from '@ngrx/store';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\nvar FaabsComponent = /*#__PURE__*/function () {\n  function FaabsComponent(message, http, store) {\n    _classCallCheck(this, FaabsComponent);\n\n    this.message = message;\n    this.http = http;\n    this.store = store;\n    this.isTopicsVisible = false;\n    this.isAttendanceVisible = false;\n    this.isPastAttendanceVisible = false;\n    this.loading = true;\n  } //Get the faabs groups\n  // Get the faabs topics and set their id as the key of the object\n\n\n  _createClass(FaabsComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      this.faabs = this.http.getFaabsGroups();\n      this.http.getFaabsTopics().subscribe(function (data) {\n        _this.faabsTopics = _this.arrayToObj(data, 'id');\n      });\n      this.loading = false;\n      this.http.getFaabsAttendanceRegister() // .subscribe((data: any[]) => this.faabsAttendanceRegister = this.arrayToObj(data.map((item: FaabsAttendance) => {return {...item, key: item.topic+item.created_at+item.faabs_group_id }}), 'id'));\n      .subscribe(function (data) {\n        return _this.faabsAttendanceRegister = data;\n      });\n    }\n  }, {\n    key: \"arrayToObj\",\n    value: function arrayToObj(data, key) {\n      return data.reduce(function (acc, curr) {\n        return acc[curr[key]] = curr, acc;\n      }, {});\n    }\n  }, {\n    key: \"arrayToObjOfArrays\",\n    value: function arrayToObjOfArrays(data, key) {\n      return data.reduce(function (acc, curr) {\n        return acc[curr[key]] = curr, acc;\n      }, []);\n    }\n  }, {\n    key: \"getFaabsTopics\",\n    value: function getFaabsTopics(faabsID) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.http.getFaabsTopicsEnrollments().subscribe(function (data) {\n                  _this2.faabsTopicsEnrollmentsFiltered = data.filter(function (topic) {\n                    return (topic === null || topic === void 0 ? void 0 : topic.faabs_id) === faabsID;\n                  });\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"showTopicsModal\",\n    value: function showTopicsModal(faabsID) {\n      this.isTopicsVisible = true;\n      this.getFaabsTopics(faabsID);\n    }\n  }, {\n    key: \"showAttendanceModal\",\n    value: function showAttendanceModal(faabsID) {\n      this.isAttendanceVisible = true;\n      this.faabsIDSelected = faabsID;\n    }\n  }, {\n    key: \"showPastAttendanceModal\",\n    value: function showPastAttendanceModal(faabsID) {\n      var _this3 = this;\n\n      this.isPastAttendanceVisible = true;\n      this.faabsIDSelected = faabsID;\n      this.faabsAttendanceRegisterFiltered = this.faabsAttendanceRegister.filter(function (data) {\n        return _this3.faabsIDSelected === data.faabs_group_id;\n      });\n      console.log(this.faabsAttendanceRegister.map(function (data) {\n        return {\n          id: data.faabs_group_id\n        };\n      }));\n    }\n  }, {\n    key: \"handleCancel\",\n    value: function handleCancel() {\n      this.isTopicsVisible = false;\n      this.isAttendanceVisible = false;\n      this.isPastAttendanceVisible = false;\n    }\n  }, {\n    key: \"handleTopicsOk\",\n    value: function handleTopicsOk() {\n      this.isTopicsVisible = false;\n    }\n  }, {\n    key: \"handleAttendanceOk\",\n    value: function handleAttendanceOk() {\n      this.isAttendanceVisible = false;\n      this.faabsIDSelected = 0;\n    }\n  }, {\n    key: \"handlePastAttendanceOk\",\n    value: function handlePastAttendanceOk() {\n      this.isPastAttendanceVisible = false;\n      this.faabsIDSelected = 0;\n    }\n  }]);\n\n  return FaabsComponent;\n}();\n\nFaabsComponent.ctorParameters = function () {\n  return [{\n    type: NzMessageService\n  }, {\n    type: DataService\n  }, {\n    type: Store\n  }];\n};\n\nFaabsComponent = __decorate([Component({\n  selector: 'app-faabs',\n  template: __NG_CLI_RESOURCE__0\n}), __metadata(\"design:paramtypes\", [NzMessageService, DataService, Store])], FaabsComponent);\nexport { FaabsComponent };","map":null,"metadata":{},"sourceType":"module"}